function load_voices(e){$.ajax({url:base_url+"YourVoice/load_voices",method:"POST",data:{offset:e,notin:voiceid}}).done(function(t){var a="",i="",o="";if((t=JSON.parse(t)).data.length>0){for(var l in t.data)o=create_slug(t.data[l].title),a+='<a href="'+base_url+"YourVoice/blog_detail/"+t.data[l].id+"/"+o+"?t="+timestamp+'" class="a-nostyle">                            <div class="cust-shadow border px-3 mb-4 a-special">                                <div class="row maincolor">                                    <div class="col-md-4 py-2">                                        <h5 class="maincolor font-weight-bold letterspacing05">'+t.data[l].title+"</h5>                                        <small>"+t.data[l].created_date+'</small>                                    </div>                                    <div class="col-md-4">                                        <p class="py-2 text-justify description ellipsis">'+t.data[l].description+'</p>                                    </div>                                    <div class="col-md-4 py-2">                                        <div class="ad mt-2">                                            <img id="image-ad" class="img-fluid" src="'+base_url+"images/blogs/"+t.data[l].image+'"/>                                            <p id="ad-text">'+t.data[l].category+"</p>                                        </div>                                    </div>                                </div>                            </div>                        </a>",i+='<div class="carousel-item '+(0==l?"active":"")+'">                            <a href="'+base_url+"YourVoice/blog_detail/"+t.data[l].id+"/"+o+"?t="+timestamp+'" class="a-nostyle">                                <div class="px-3 mb-4 a-special">                                    <div class="row maincolor">                                        <div class="col-md-4 py-2 ">                                            <div class="ad mt-2">                                                <img id="image-ad" src="'+base_url+"images/blogs/"+t.data[l].image+'" class="w-100"/>                                                <p id="ad-text">'+t.data[l].category+'</p>                                            </div>                                        </div>                                        <div class="col-md-4 pt-2">                                            <h5 class="maincolor font-weight-bold letterspacing1">'+t.data[l].title+'</h5>                                        </div>                                        <div class="col-md-4">                                            <p class="text-justify cust-text">'+t.data[l].description+'<br><small class="d-block mt-2">\x3c!--By Dorothly Gwller--\x3e '+t.data[l].created_date+"</small>                                            </p>                                        </div>                                    </div>                                </div>                            </a>                        </div>";0==e?$(".trending-article-list").html(a):$(".trending-article-list").append(a),$("#mobile_carousel .carousel-inner").html(i),"1"==t.is_available?$(".load-more-voice-list").closest(".load-btn-holder").removeClass("hide"):$(".load-more-voice-list").closest(".load-btn-holder").addClass("hide"),$(".ellipsis").each(function(e,t){var a=$(t).text();""!==a&&a.length>=162&&(a=a.substring(0,162)+"...",$(this).text(a))})}else $(".trending-article-list").html('<div class="row"><div class="col s11 m11 l11 offset-s1 offset-m1 offset-l1 center-align">No articles raised yet</div></div>')})}function create_slug(e){var t="";return t=e.replace(/[~`!@#$%^&*()_=+{}|\/;'<>?,]/g,""),t=t.split(" ").join("-")}var base_url=$("body").attr("data-base_url"),uid=$("body").attr("data-uid"),voiceid=$("body").attr("data-detailid"),date=new Date,timestamp=date.getTime();$(function(){$("a.head-login").attr("href",base_url+"Login?section=voicedetail&vid="+voiceid);load_voices(0);load_latest_voices(0),$("#cnfDeleteVoiceModal").on("show.bs.modal",function(e){var t=$(e.relatedTarget).attr("data-id");$("#cnfDeleteVoiceModal #del_voice_id").val(t)}),$("#cnfDeleteVoiceModal button#btn_delete_voice_yes").on("click",function(e){var t=$(this),a=$("#cnfDeleteVoiceModal #del_voice_id").val();t.attr("disabled","disabled").html("Processing..."),$.ajax({url:base_url+"YourVoice/delete_voice",method:"POST",data:{voice_id:a}}).done(function(e){setTimeout(function(){t.removeAttr("disabled").html("Yes"),window.location.assign(base_url+"YourVoice")},2e3)})}),$(".voice-like").on("click",callback_voice_like),$(document).on("click",".reply-delete",callback_delete_comment_reply),$(".description-container img").each(function(){$(this).addClass("img-fluid")}),$("textarea.comment-text").on("keyup",function(e){$(this).closest(".comment-box-holder").find(".comment-error").html("")}),$(".view-more-comments").on("click",view_more_comments),$(".post-comment").on("click",function(e){if(e.preventDefault(),0==uid)return window.location.assign(base_url+"Login?section=voicedetail&vid="+voiceid),!1;var t=$(this),a=t.closest(".comment-box-holder").find("textarea.comment-text").val().trim(),i=t.attr("data-id"),o="",l=parseInt($("#comentbox .total-comments-count").html());if(""==a)return t.closest(".comment-box-holder").find(".comment-error").html("Please enter comment"),!1;t.addClass("disabled"),$.ajax({url:base_url+"YourVoice/comment_on_voice",method:"POST",data:{voice_id:i,comment:a}}).done(function(e){if((e=JSON.parse(e)).status){t.removeClass("disabled"),t.closest(".comment-box-holder").find("textarea.comment-text").val(""),$("#comentbox .total-comments-count").html(l+1);var s=e.data.comment_id;o+='<div class="row comment_num_'+s+'">                                    <div class="col-11 offset-1 pt-0 comment-text-holder">                                        <h6 class="font-weight-bold mb-0 pt-2">You</h6>                                        <p class="maincolor p-comment mb-0 font-weight-300">'+a+'</p>                                        <div class="edit_comment_box_holder hide" style="display:none;">                                            <textarea class="cust-textarea edit-comment-text" placeholder="Write Comment Here">'+a+'</textarea>                                            <i class="sendicon fa fa-chevron-right post-edit-comment" aria-hidden="true" data-id="'+i+'" data-comment_id="'+s+'"></i>                                            <p class="error edit-comment-error mb-0 ml-1" style="font-size: 14px;color: red;"></p>                                        </div>                                        <div class="d-flex justify-content-space">                                            <p class="mx-2">                                                <i class="fa fa-reply"></i>                                                <a href="#" class="a-nostyle show-hide-reply" data-id="'+i+'" data-comment_id="'+s+'"><small>reply</small></a>                                            </p>                                            <p class="mx-2"><i class="fa fa-pencil-square-o"></i>                                                <a href="#" class="a-nostyle edit-comment" data-id="'+i+'" data-comment_id="'+s+'"><small>Edit</small></a>                                            </p>                                            <p class="mx-2"><i class="fa fa-trash-o"></i>                                                <a href="#" class="a-nostyle comment-delete" data-id="'+i+'" data-comment_id="'+s+'"><small>Delete</small></a>                                            </p>                                        </div>                                    </div>                                    <div class="col-11 border offset-1 reply-container_'+s+'" style="display:none;">                                        <div class="row">                                            <div class="col-md-1 col-2 pr-0">                                                <img src="'+base_url+'/images/other/profile.png" class="img-fluid text-center pt-2">                                            </div>                                            <div class="col-11 pt-2 comment-reply-box-holder">                                                <textarea class="cust-textarea comment-reply-text" placeholder="Write Reply Here"></textarea>                                                <a href="#" class="post-comment-reply" data-id="'+i+'" data-comment_id="'+s+'"><i class="sendicon fa fa-chevron-right" aria-hidden="true"></i></a>                                                <p class="error comment-reply-error mb-0 ml-1" style="font-size: 14px;color: red;"></p>                                            </div>                                        </div>                                        <div class="comment-reply-list">                                                                                    </div>                                    </div>                                </div>';var d=parseInt(t.closest(".comment_container").find(".row .view-more-comments").attr("data-offset"))+1;t.closest(".comment_container").find(".comments-list").prepend(o),t.closest(".comment_container").find(".row .view-more-comments").attr("data-offset",d)}else t.removeClass("disabled")})}),$(document).on("click",".edit-comment",function(e){e.preventDefault();var t=$(this).attr("data-comment_id");$(this).closest(".comment_num_"+t).find(".edit_comment_box_holder").show(),$(this).closest(".comment_num_"+t).find("p.p-comment").hide()}),$(document).on("click",".post-edit-comment",function(e){e.preventDefault();var t=$(this),a=t.attr("data-id"),i=t.attr("data-comment_id"),o=t.closest(".edit_comment_box_holder").find("textarea.edit-comment-text").val().trim();if(""==o)return t.closest(".edit_comment_box_holder").find(".edit-comment-error").html("Please enter comment"),!1;t.addClass("disabled"),$.ajax({url:base_url+"YourVoice/update_comment_on_voice",method:"POST",data:{voice_id:a,comment_id:i,comment:o}}).done(function(e){(e=JSON.parse(e)).status?(t.removeClass("disabled"),t.closest(".comment_num_"+i).find(".edit_comment_box_holder").hide(),t.closest(".comment_num_"+i).find("p.p-comment").html(o).show()):t.removeClass("disabled")})}),$(document).on("click",function(e){return"Edit"!=$(e.target).html()&&("cust-textarea edit-comment-text"!=$(e.target).attr("class")&&("sendicon fa fa-chevron-right post-edit-comment"!=$(e.target).attr("class")&&("cust-textarea edit-comment-reply-text"!=$(e.target).attr("class")&&("sendicon fa fa-chevron-right post-edit-reply-comment"!=$(e.target).attr("class")&&($(".edit_comment_box_holder").hide(),$(".edit_comment_reply_box_holder").hide(),void $("p.maincolor").show())))))}),$(document).on("click",".show-hide-reply",function(e){if(e.preventDefault(),0==uid)return window.location.assign(base_url+"Login?section=voicedetail&vid="+voiceid),!1;var t=$(this),a=t.attr("data-id"),i=t.attr("data-comment_id"),o="",l="",s="";$.ajax({url:base_url+"YourVoice/get_comment_replies",method:"POST",data:{voice_id:a,comment_id:i,offset:0}}).done(function(e){e=JSON.parse(e),console.log(e);for(var d in e.data){var c=e.data[d].id,r=e.data[d].alias,n=e.data[d].reply;l=uid==e.data[d].user_id?'<p class="mx-2"><i class="fa fa-pencil-square-o"></i>                                        <a href="#" class="a-nostyle edit-comment-reply" data-id="'+a+'" data-comment_id="'+i+'"  data-reply_id="'+c+'"><small>Edit</small></a>                                    </p>                                    <p class="mx-2"><i class="fa fa-trash-o"></i>                                        <a href="#" class="a-nostyle reply-delete" data-id="'+a+'" data-comment_id="'+i+'"  data-reply_id="'+c+'"><small>Delete</small></a>                                    </p>':"",o+='<div class="row reply_num_'+c+'">                                <div class="col-11 offset-1 pt-2 comment-reply-text-holder">                                    <h6 class="font-weight-bold mb-0 pt-2">'+r+'</h6>                                    <p class="maincolor mb-0 font-weight-300">'+n+'</p>                                    <div class="edit_comment_reply_box_holder hide" style="display:none;">                                        <textarea class="cust-textarea edit-comment-reply-text" placeholder="Write Reply Here">'+n+'</textarea>                                        <a href="#" class="post-edit-comment-reply" data-id="'+a+'" data-comment_id="'+i+'" data-reply_id="'+c+'"><i class="sendicon fa fa-chevron-right" aria-hidden="true"></i></a>                                        <p class="error edit-comment-reply-error mb-0 ml-1" style="font-size: 14px;color: red;"></p>                                    </div>                                    <div class="d-flex justify-content-space">                                        '+l+"                                    </div>                                </div>                            </div>"}if(t.closest(".comment_container").find(".reply-container_"+i+" .comment-reply-list").html(o),"1"==e.is_available){s='<div class="row">                                            <div class="col-12 pt-1 text-right">                                                <a href="#" class="a-nostyle view-more-replies" data-id="'+a+'" data-comment_id="'+i+'" data-offset="5"><small>View more replies</small></a>                                            </div>                                        </div>',t.closest(".comment_container").find(".reply-container_"+i).append(s)}}),t.closest(".comment_container").find(".reply-container_"+i).slideToggle()}),$(document).on("click",".comment-delete",callback_delete_voice_comment),$("textarea.comment-reply-text").on("keyup",function(e){$(this).closest(".comment-reply-box-holder").find(".comment-reply-error").html("")}),$(document).on("click",".view-more-replies",view_more_replies),$(document).on("click",".post-comment-reply",function(e){if(e.preventDefault(),0==uid)return window.location.assign(base_url+"Login?section=voicedetail&vid="+voiceid),!1;var t=$(this),a=t.closest(".comment-reply-box-holder").find("textarea.comment-reply-text").val(),i=t.attr("data-comment_id"),o=t.attr("data-id");if(""==a)return t.closest(".comment-reply-box-holder").find(".comment-reply-error").html("Please enter reply."),!1;t.addClass("disabled");var l="";$.ajax({url:base_url+"YourVoice/reply_on_comment_voice",method:"POST",data:{voice_id:o,comment_id:i,comment_reply:a}}).done(function(e){if((e=JSON.parse(e)).status){t.removeClass("disabled"),t.closest(".comment-reply-box-holder").find("textarea.comment-reply-text").val("");var s=e.data.reply_id;l+='<div class="row reply_num_'+s+'">                                            <div class="col-11 offset-1 pt-2 comment-reply-text-holder">                                                <h6 class="font-weight-bold mb-0 pt-2">You</h6>                                                <p class="maincolor mb-0 font-weight-300">'+a+'</p>                                                <div class="edit_comment_reply_box_holder hide" style="display:none;">                                                    <textarea class="cust-textarea edit-comment-reply-text" placeholder="Write Reply Here">'+a+'</textarea>                                                    <a href="#" class="post-edit-comment-reply" data-id="'+o+'" data-comment_id="'+i+'" data-reply_id="'+s+'"><i class="sendicon fa fa-chevron-right" aria-hidden="true"></i></a>                                                    <p class="error edit-comment-reply-error mb-0 ml-1" style="font-size: 14px;color: red;"></p>                                                </div>                                                <div class="d-flex justify-content-space">                                                    <p class="mx-2"><i class="fa fa-pencil-square-o"></i>                                                        <a href="#" class="a-nostyle edit-comment-reply" data-id="'+o+'" data-comment_id="'+i+'"  data-reply_id="'+s+'"><small>Edit</small></a>                                                    </p>                                                    <p class="mx-2"><i class="fa fa-trash-o"></i>                                                        <a href="#" class="a-nostyle reply-delete" data-id="'+o+'" data-comment_id="'+i+'"  data-reply_id="'+s+'"><small>Delete</small></a>                                                    </p>                                                </div>                                            </div>                                        </div>',t.closest(".reply-container_"+i).find(".comment-reply-list").prepend(l)}else t.removeClass("disabled")})}),$(document).on("click",".edit-comment-reply",function(e){e.preventDefault();var t=$(this).attr("data-reply_id");$(this).closest(".reply_num_"+t).find(".edit_comment_reply_box_holder").show(),$(this).closest(".reply_num_"+t).find("p.maincolor").hide()}),$(document).on("click",".post-edit-comment-reply",function(e){e.preventDefault();var t=$(this),a=t.attr("data-id"),i=t.attr("data-comment_id"),o=t.attr("data-reply_id"),l=t.closest(".edit_comment_reply_box_holder").find("textarea.edit-comment-reply-text").val().trim();if(""==l)return t.closest(".edit_comment_reply_box_holder").find(".edit-comment-reply-error").html("Please enter reply"),!1;t.addClass("disabled"),$.ajax({url:base_url+"YourVoice/update_comment_reply_on_voice",method:"POST",data:{voice_id:a,comment_id:i,comment_reply_id:o,comment_reply:l}}).done(function(e){(e=JSON.parse(e)).status?(t.removeClass("disabled"),t.closest(".reply_num_"+o).find(".edit_comment_reply_box_holder").hide(),t.closest(".reply_num_"+o).find("p.maincolor").html(l).show()):t.removeClass("disabled")})})});var callback_voice_like=function(e){if(0==uid)return window.location.assign(base_url+"Login?section=voicedetail&vid="+voiceid),!1;e.preventDefault();var t=$(this),a=$(this).attr("data-is_user_liked"),i=$(this).attr("data-id");$.ajax({url:base_url+"YourVoice/like_unlike_voice",method:"POST",data:{voice_id:i,is_user_like:a}}).done(function(e){if((e=JSON.parse(e)).status){var i="0"==a?"1":"0";t.attr("data-is_user_liked",i),"0"==a?$(".like-icon").removeClass("fa-thumbs-o-up").addClass("fa-thumbs-up"):$(".like-icon").removeClass("fa-thumbs-up").addClass("fa-thumbs-o-up"),$("#comentbox .total-likes-count").html(e.data.total_likes)}})},callback_delete_voice_comment=function(e){e.preventDefault();var t=$(this),a=$(this).attr("data-id"),i=$(this).attr("data-comment_id"),o=parseInt($("#comentbox .total-comments-count").html());$.ajax({url:base_url+"YourVoice/delete_voice_comment",method:"POST",data:{voice_id:a,comment_id:i}}).done(function(e){(e=JSON.parse(e)).status&&(t.closest(".row.comment_num_"+i).slideUp("slow",function(){}),$("#comentbox .total-comments-count").html(o-1))})},callback_delete_comment_reply=function(e){e.preventDefault();var t=$(this),a=$(this).attr("data-id"),i=$(this).attr("data-comment_id"),o=$(this).attr("data-reply_id");$.ajax({url:base_url+"YourVoice/delete_voice_comment_reply",method:"POST",data:{voice_id:a,comment_id:i,comment_reply_id:o}}).done(function(e){(e=JSON.parse(e)).status&&t.closest(".row.reply_num_"+o).slideUp("slow",function(){})})},load_latest_voices=function(e){$.ajax({url:base_url+"YourVoice/load_latest_voices",method:"POST",data:{offset:e,voiceid:voiceid}}).done(function(e){var t="",a="";if((e=JSON.parse(e)).data.length>0){for(var i in e.data)a=create_slug(e.data[i].title),t+='<a href="'+base_url+"YourVoice/blog_detail/"+e.data[i].id+"/"+a+"?t="+timestamp+'" class="a-nostyle">                            <div id="ad" class="my-3">                                <h4 class="mt-4 font-weight-bold mb-0" id="adtitle">'+e.data[i].title+"</h4>                                <small>"+e.data[i].created_date+'</small>                                <div class="ad mt-2">                                    <img id="image-ad" src="'+base_url+"images/blogs/"+e.data[i].image+'" class="img-fluid w-100"/>                                    <p id="ad-text">'+e.data[i].category+"</p>                                </div>                            </div>                        </a>";$(".latest-voices-list").html(t)}})},view_more_comments=function(e){if(e.preventDefault(),0==uid)return window.location.assign(base_url+"Login?section=voicedetail&vid="+voiceid),!1;var t=$(this),a=t.attr("data-id"),i=0==t.attr("data-offset")?2:t.attr("data-offset"),o="";$.ajax({url:base_url+"YourVoice/view_more_comments",method:"POST",data:{voice_id:a,offset:i}}).done(function(e){e=JSON.parse(e),console.log(e);var l=parseInt(e.data.length)+parseInt(i);console.log(l);for(var s in e.data){var d=e.data[s].id,c=uid==e.data[s].user_id?"You":e.data[s].alias,r="";r=uid==e.data[s].user_id?'<p class="mx-2"><i class="fa fa-pencil-square-o"></i>                                    <a href="#" class="a-nostyle edit-comment" data-id="'+a+'" data-comment_id="'+d+'"><small>Edit</small></a>                                </p>                                <p class="mx-2"><i class="fa fa-trash-o"></i>                                    <a href="#" class="a-nostyle comment-delete" data-id="'+a+'" data-comment_id="'+d+'"><small>Delete</small></a>                                </p>':"",o+='<div class="row comment_num_'+d+'">                                    <div class="col-11 offset-1 pt-0 comment-text-holder">                                        <h6 class="font-weight-bold mb-0 pt-2">'+c+'</h6>                                        <p class="maincolor p-comment mb-0 font-weight-300">'+e.data[s].comment+'</p>                                        <div class="edit_comment_box_holder hide" style="display:none;">                                            <textarea class="cust-textarea edit-comment-text" placeholder="Write Comment Here">'+e.data[s].comment+'</textarea>                                            <i class="sendicon fa fa-chevron-right post-edit-comment" aria-hidden="true" data-id="'+a+'" data-comment_id="'+d+'"></i>                                            <p class="error edit-comment-error mb-0 ml-1" style="font-size: 14px;color: red;"></p>                                        </div>                                        <div class="d-flex justify-content-space">                                            <p class="mx-2">                                                <i class="fa fa-reply"></i>                                                <a href="#" class="a-nostyle show-hide-reply" data-id="'+a+'" data-comment_id="'+d+'"><small>reply</small></a>                                            </p>                                            '+r+'                                        </div>                                    </div>                                    <div class="col-11 border offset-1 reply-container_'+d+'" style="display:none;">                                        <div class="row">                                            <div class="col-md-1 col-2 pr-0">                                                <img src="'+base_url+'/images/other/profile.png" class="img-fluid text-center pt-2">                                            </div>                                            <div class="col-11 pt-2 comment-reply-box-holder">                                                <textarea class="cust-textarea comment-reply-text" placeholder="Write Reply Here"></textarea>                                                <a href="#" class="post-comment-reply" data-id="'+a+'" data-comment_id="'+d+'"><i class="sendicon fa fa-chevron-right" aria-hidden="true"></i></a>                                                <p class="error comment-reply-error mb-0 ml-1" style="font-size: 14px;color: red;"></p>                                            </div>                                        </div>                                        <div class="comment-reply-list">                                                                                    </div>                                    </div>                                </div>'}t.closest(".comment_container").find(".comments-list").append(o),t.attr("data-offset",l),"1"==e.is_available?t.closest(".row").show():t.closest(".row").hide()})},view_more_replies=function(e){if(0==uid)return window.location.assign(base_url+"Login?section=voicedetail&vid="+voiceid),!1;e.preventDefault();var t=$(this),a=t.attr("data-id"),i=t.attr("data-comment_id"),o=t.attr("data-offset"),l="",s="",d="";$.ajax({url:base_url+"YourVoice/get_comment_replies",method:"POST",data:{voice_id:a,comment_id:i,offset:o}}).done(function(e){e=JSON.parse(e);for(var c in e.data){var r=e.data[c].id,n=e.data[c].alias,m=e.data[c].reply;s=uid==e.data[c].user_id?'<p class="mx-2"><i class="fa fa-pencil-square-o"></i>                                        <a href="#" class="a-nostyle edit-comment-reply" data-id="'+a+'" data-comment_id="'+i+'"  data-reply_id="'+r+'"><small>Edit</small></a>                                    </p>                                    <p class="mx-2"><i class="fa fa-trash-o"></i>                                        <a href="#" class="a-nostyle reply-delete" data-id="'+a+'" data-comment_id="'+i+'"  data-reply_id="'+r+'"><small>Delete</small></a>                                    </p>':"",l+='<div class="row reply_num_'+r+'">                                <div class="col-11 offset-1 pt-2 comment-reply-text-holder">                                    <h6 class="font-weight-bold mb-0 pt-2">'+n+'</h6>                                    <p class="maincolor mb-0 font-weight-300">'+m+'</p>                                    <div class="edit_comment_reply_box_holder hide" style="display:none;">                                        <textarea class="cust-textarea edit-comment-reply-text" placeholder="Write Reply Here">'+m+'</textarea>                                        <a href="#" class="post-edit-comment-reply" data-id="'+a+'" data-comment_id="'+i+'" data-reply_id="'+r+'"><i class="sendicon fa fa-chevron-right" aria-hidden="true"></i></a>                                        <p class="error edit-comment-reply-error mb-0 ml-1" style="font-size: 14px;color: red;"></p>                                    </div>                                    <div class="d-flex justify-content-space">                                        '+s+"                                    </div>                                </div>                            </div>"}if(t.closest(".comment_container").find(".reply-container_"+i+" .comment-reply-list").append(l),"1"==e.is_available){d='<div class="row">                                            <div class="col-12 pt-1 text-right">                                                <a href="#" class="a-nostyle view-more-replies" data-id="'+a+'" data-comment_id="'+i+'" data-offset="'+(o+5)+'"><small>View more replies</small></a>                                            </div>                                        </div>',t.closest(".comment_container").find(".reply-container_"+i).append(d)}else t.closest(".comment_container").find(".reply-container_"+i+" .view-more-replies").closest(".row").hide()})};